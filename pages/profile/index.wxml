<view class="profile-page">
  <!-- 顶部用户信息 -->
  <view class="profile-header">
    <view class="user-info" bind:tap="onViewProfile">
      <image class="user-avatar" src="{{userInfo.avatar}}" mode="aspectFill" />
      <view class="user-content">
        <view wx:if="{{isLogin}}" class="user-name">
          <text class="nickname">{{userInfo.nickname}}</text>
          <text class="vip-level">{{userInfo.vipLevel}}</text>
        </view>
        <text wx:else class="login-tip">点击登录</text>
        <view wx:if="{{isLogin}}" class="user-stats">
          <text class="stat-item">积分：{{userInfo.points}}</text>
          <text class="stat-item">优惠券：{{userInfo.couponCount}}张</text>
        </view>
      </view>
      <ec-icon name="arrow-right" size="28rpx" color="#999" />
    </view>
  </view>

  <!-- 订单状态 -->
  <view class="section">
    <view class="section-header" bind:tap="onViewOrder" data-type="all">
      <text class="section-title">我的订单</text>
      <view class="section-more">
        <text class="more-text">查看全部</text>
        <ec-icon name="arrow-right" size="24rpx" color="#999" />
      </view>
    </view>
    
    <view class="order-stats">
      <view class="stat-item" bind:tap="onViewOrder" data-type="unpaid">
        <view class="stat-icon">
          <ec-icon name="wallet" size="40rpx" color="#FF4400" />
          <text wx:if="{{orderStats.unpaid > 0}}" class="badge">{{orderStats.unpaid}}</text>
        </view>
        <text class="stat-text">待付款</text>
      </view>
      
      <view class="stat-item" bind:tap="onViewOrder" data-type="shipped">
        <view class="stat-icon">
          <ec-icon name="deliver" size="40rpx" color="#1989fa" />
          <text wx:if="{{orderStats.shipped > 0}}" class="badge">{{orderStats.shipped}}</text>
        </view>
        <text class="stat-text">待收货</text>
      </view>
      
      <view class="stat-item" bind:tap="onViewOrder" data-type="received">
        <view class="stat-icon">
          <ec-icon name="check" size="40rpx" color="#07c160" />
          <text wx:if="{{orderStats.received > 0}}" class="badge">{{orderStats.received}}</text>
        </view>
        <text class="stat-text">待评价</text>
      </view>
      
      <view class="stat-item" bind:tap="onViewOrder" data-type="refund">
        <view class="stat-icon">
          <ec-icon name="refund" size="40rpx" color="#ff976a" />
          <text wx:if="{{orderStats.refund > 0}}" class="badge">{{orderStats.refund}}</text>
        </view>
        <text class="stat-text">退款/售后</text>
      </view>
    </view>
  </view>

  <!-- 快捷功能 -->
  <view class="section">
    <view class="section-header">
      <text class="section-title">快捷功能</text>
    </view>
    <view class="quick-actions">
      <view
        wx:for="{{quickActions}}"
        wx:key="title"
        class="action-item"
        bind:tap="onQuickAction"
        data-path="{{item.path}}"
      >
        <ec-icon name="{{item.icon}}" size="48rpx" color="#333" />
        <text class="action-text">{{item.title}}</text>
      </view>
    </view>
  </view>

  <!-- 我的服务 -->
  <view class="section">
    <view class="section-header">
      <text class="section-title">我的服务</text>
    </view>
    <view class="service-list">
      <ec-cell
        wx:for="{{services}}"
        wx:key="title"
        title="{{item.title}}"
        left-icon="{{item.icon}}"
        is-link
        border="{{index < services.length - 1}}"
        data-path="{{item.path}}"
        bind:tap="onService"
      />
    </view>
  </view>
</view>
